var getLang=function(b){switch(b.toLowerCase()){case"en-us":return"en-US";case"en-ca":return"en-CA";case"en-kr":return"en-KR";case"ja-jp":return"ja-JP";case"pt":case"pt-br":return"pt-BR";case"es-419":case"es-la":return"es-LA";case"es-mx":return"es-MX";case"fr-ca":return"fr-CA";case"ja-jp":return"ja-JP";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW";default:return b}};var infoDictionary={en:"en.json","en-US":"en-US.json","en-CA":"en-CA.json","en-KR":"en-KR.json",es:"es.json","es-LA":"es-LA.json","es-MX":"es-MX.json",fr:"fr.json","fr-CA":"fr-CA.json",ja:"ja.json","ja-JP":"ja-JP.json",pt:"pt.json","pt-BR":"pt-BR.json",zh:"zh.json","zh-CN":"zh-CN.json","zh-HK":"zh-HK.json","zh-TW":"zh-TW.json"};var langDictionary=function(f){var g=f.toLowerCase().split("-")[0],h=f.toLowerCase().split("-")[1],e;e=infoDictionary[f];if(!e){e=infoDictionary[g]}if(!e){e=infoDictionary.en}return e};var ac_media_language=false;var getACMediaLanguage=function(){var e=document.getElementsByTagName("html").item(0),f=e.getAttribute("lang"),h=getLang(f),i=langDictionary(h);var g=new Ajax.Request(document.getElementByID("resources-uri").contents+"/lib/ac_media_languages/"+i,{method:"get",requestHeaders:{Accept:"application/json"},onSuccess:function(a){ac_media_language=new Function("return "+a.responseText)()}.bind(this),evalJS:false})};var Media={VERSION:"3.5",MIN_QUICKTIME_VERSION:"7.4",CAPTIONS_NS:"http://www.w3.org/2006/04/ttaf1",create:function(u,v,l){var r,m,o,q,t=true,n=true,s=true;if(Media.Detection.Firefox()){Element.addClassName(u,"mozilla")}if(Media.Detection.IE()){Media._createEventSource()}if(l.spec){if(l.spec=="qt"){t=false;s=false}else{if(l.spec=="video"){n=false;s=false}else{if(l.spec=="sbvdp"){t=false;n=false}}}}if(t&&Media._isHTML5VideoAvailable()){return p(Media.Spec.Video)}if(n&&Media._isQuickTimeAvailable(Media.MIN_QUICKTIME_VERSION)||Media.Detection.Mobile()){return p(Media.Spec.QuickTime)}if(s&&Media._isSBVDPAvailable(Media.MIN_SBVDP_VERSION)){return p(Media.Spec.SBVDP)}if(Media._shouldShowDownloadPrompt()){Media.createDownloadPrompt(u,v,l)}function p(c){q=Media.Controller(u);r=c.create(u,v,l);m=Media.VideoInterface(r,q);var b=c.eventsToRegister;for(var d in b){var a=b[d].name||b[d],e=b[d].callback;m.registerEvent(d,a,e)}if(c.pollForChanges){m.pollForChanges(c.pollForChanges)}if(c.interfaceMethods){m.override(c.interfaceMethods)}m.setup();q.setVideo(m);q.setVideoSrc(v);q.container=u;q.movieLoadingPanelClass="movie-loading-panel";if(typeof l.width!="undefined"&&typeof l.height!="undefined"){if(typeof q.currentWidth=="undefined"&&typeof q.currentHeight=="undefined"){q.currentWidth=l.width;q.currentHeight=l.height}q.movieLoadingPanelClass="movie-loading-panel_"+l.width+"x"+l.height}Element.addClassName(u,q.movieLoadingPanelClass);return q}return false},createDownloadPrompt:function(j,k,o){Element2.Methods.removeAllChildNodes(j);var n=document.createElement("a"),m=document.createElement("span"),l=document.createElement("span"),p=document.createElement("span"),i=o.downloadUrl||ac_media_language.downloadquicktimeurl||"http://www.apple.com/quicktime/download/";Element.addClassName(n,"quicktime-download");if(typeof o.width!=="undefined"&&typeof o.height!=="undefined"){Element.addClassName(n,"size"+o.width+"x"+o.height)}n.setAttribute("href",i);Element.addClassName(m,"quicktime-download-title");Element.addClassName(l,"quicktime-download-text");Element.addClassName(p,"quicktime-download-button");m.innerHTML=o.downloadTitle||ac_media_language.downloadquicktimetitle||"Get QuickTime.";l.innerHTML=o.downloadText||ac_media_language.downloadquicktimetext||"Download QuickTime to view this video.<br />QuickTime is free for Mac + PC.";p.innerHTML=o.downloadButton||ac_media_language.downloadquicktimebutton||"Download";n.appendChild(m);n.appendChild(l);n.appendChild(p);j.appendChild(n);if("fire" in Element){Element.fire(document.body,"QuickTime:noCompatibleQTAvailable",{controller:this,minVersion:Media.MIN_QUICKTIME_VERSION})}return n},_isHTML5VideoAvailable:function(){return Media.Detection.HTML5()},_isQuickTimeAvailable:function(){return Media.Detection.QuickTime(Media.MIN_QUICKTIME_VERSION)},_isSBVDPAvailable:function(){return Media.Detection.SBVDP(Media.MIN_SBVDP_VERSION)},_shouldShowDownloadPrompt:function(){return !Media.Detection.Mobile()},_createEventSource:function(){var f="qt_event_source",d,e;if(document.getElementById(f)){return}d=document.createElement("object");d.id=f;d.setAttribute("clsid","CB927D12-4FF7-4a9e-A169-56E4B8A75598");e=document.getElementsByTagName("head")[0];e.appendChild(d)}};Media.Detection={HTML5:function(){if(!("HTMLMediaElement" in window)){return false}var b=document.createElement("video");return(b.canPlayType&&b.canPlayType("video/mp4")!=="")},QuickTime:function(b){return AC.Detector.isValidQTAvailable(b)},SBVDP:function(b){return AC.Detector.isSBVDPAvailable(b)},Mobile:function(){return AC.Detector.isMobile()},IE:function(){return AC.Detector.isIEStrict()},Firefox:function(){return AC.Detector.isFirefox()},Chrome:function(){return AC.Detector.isChrome()},CSSTransitions:function(){try{var d=document.createElement("div").style;d.setProperty("-webkit-transition","inherit",null);d.setProperty("-moz-transition","inherit",null);d.setProperty("-o-transition","inherit",null);d.setProperty("transition","inherit",null);return(d.getPropertyValue("-webkit-transition")=="inherit"||d.getPropertyValue("-moz-transition")=="inherit"||d.getPropertyValue("-o-transition")=="inherit"||d.getPropertyValue("transition")=="inherit")}catch(c){return false}},CSSBorderRadius:function(){try{var d=document.createElement("div").style;d.setProperty("-webkit-border-radius","inherit",null);d.setProperty("-moz-border-radius","inherit",null);d.setProperty("-o-border-radius","inherit",null);d.setProperty("border-radius","inherit",null);return(d.getPropertyValue("-webkit-border-radius").match("inherit")||d.getPropertyValue("-moz-border-radius").match("inherit")||d.getPropertyValue("-o-border-radius").match("inherit")||d.getPropertyValue("border-radius").match("inherit"))}catch(c){return false}}};Media.Spec={Video:{create:function(i,k,n){var l=document.createElement("video"),m=document.createElement("source");if(l.canPlayType("video/mp4")){var j=n.id||(i.id?i.id+"_video":""),h=(k.indexOf("?")>0)?k.substring(0,k.lastIndexOf("?")):k;l.setAttribute("id",j);Element.addClassName(l,(l.playerType="video"));m.setAttribute("src",h);m.setAttribute("type","video/mp4");l.appendChild(m);this._configure(l,h,n);Event.observe(window,"unload",function(){try{l.stop()}catch(a){}l.style.display="none";l=null});i.appendChild(l)}else{l=this._createFallback(i,k,n)}return l},eventsToRegister:{load:"load",timeupdate:"timeupdate",durationchange:"durationchange",progress:"progress",playing:"playing",play:"play",pause:"pause",ended:"ended"},_captions:null,interfaceMethods:{duration:function(){return this.duration},time:function(){if(this.captionsEnabled===true){if(typeof Media.Spec.Video._captions!=="undefined"){var o=Media.Spec.Video._captions.getElementsByTagName("p");if(o.length>0){var i="";function r(a){var b=0;if(a){var d=a.split(":");switch(d.length){case 0:case 1:case 2:break;case 3:for(var c=0;c<3;c++){b=b*60+parseFloat(d[c].replace(",","."))}break;case 4:for(c=0;c<3;c++){b=b*60+parseFloat(d[c].replace(",","."))}break}}return b}for(var p=0,x;x=o[p];p++){var t=r(x.getAttribute("begin")),s=r(x.getAttribute("end"));if(this.currentTime<t){break}if(this.currentTime>=t&&this.currentTime<s){i=x}}if(typeof i!="undefined"&&i!=this.currentCaption){this.currentCaption=i;var u=i.childNodes,v=(typeof u!="undefined")?u.length:0,n="";for(var q=0;q<v;q++){var w=u.item(q);if(w.nodeType==3){n+="<span>"+w.nodeValue+"</span>"}}if(n===""){this.trackTextSpan.style.display="none"}else{this.trackTextSpan.style.display="inline-block";this.trackTextSpan.innerHTML=n}}}}}return this.currentTime},setTime:function(b){this.currentTime=b},volume:function(){return this.volume},setVolume:function(b){this.volume=b},muted:function(){return this.muted},setMuted:function(b){this.muted=b},rate:function(){return this.playbackRate},setRate:function(b){this.playbackRate=b},defaultRate:function(){return this.defaultPlaybackRate},src:function(){return this.src},setSrc:function(b){this.src=b},status:function(){return this.status},percentLoaded:function(){var d=0;try{d=this.buffered.end(0)/this.duration}catch(c){}return d},pause:function(){this.pause()},play:function(){this.play()},paused:function(){return this.paused},ended:function(){return this.ended},timeScale:function(){return 2997},movieType:function(){return"Video"},getContainer:function(){return this.parentNode},setTrackTextSpan:function(b){this.trackTextSpan=b},setCaptionsAvailable:function(d,f){if(typeof Media.Spec.Video._captions!="undefined"&&Media.Spec.Video._captions!==null){d();return}var h;if(f.match(/\w+:\/\//i)){f=f.replace(/\w+:\/\/[^\/]+/i,"")}var e=new Ajax.checkURL(f,d);h=document.createElement("text");h.setAttribute("type","application/ttaf+xml");h.setAttribute("src",f);this.appendChild(h);var g=new Ajax.Request(f,{method:"get",requestHeaders:{Accept:"application/ttaf+xml"},onSuccess:function(c){var b=c.responseXMLValue().documentElement;if(AC.Detector.isIEStrict()){b=b.ownerDocument}var a=b.getAttribute("xml:lang");h.setAttribute("lang",a);Media.Spec.Video._captions=b.getElementsByTagNameNS(Media.CAPTIONS_NS,"body").item(0);Media.Spec.Video._captions.currentIndex=0}.bind(this),onFailure:function(){},onException:function(){},onCreate:function(a){a.request.overrideMimeType("application/ttaf+xml")}})},enableCaptions:function(){this.captionsEnabled=true},disableCaptions:function(){if(""!==this.currentCaption){this.currentCaption=this.trackTextSpan.innerHTML=""}this.captionsEnabled=false}},_configure:function(j,h,f){if(!f){return}var i,g;for(i in f){if(f.hasOwnProperty(i)){g=i.toLowerCase();switch(g){case"type":case"src":case"data":case"classid":case"name":case"id":case"postdomevents":case"saveembedtags":case"factory":case"aggressiveCleanup":case"innerId":case"cache":case"aggressivecleanup":case"showlogo":break;case ("class"):Element.addClassName(j,f[i]);break;case ("controller"):if(f[i]){j.setAttribute("controls","controls")}break;case ("autoplay"):case ("autostart"):if(f[i]){j.setAttribute("autoplay","autoplay")}break;case ("posterframe"):if(f[i]){j.setAttribute("poster",f[i])}break;default:j.setAttribute(g,f[i]);break}}}},_createFallback:function(e,f,d){if(Media._isQuickTimeAvailable()){return Media.Spec.QuickTime.create(e,f,d)}if(Media._isSBVDPAvailable()){return Media.Spec.SBVDP.create(e,f,d)}if(Media._shouldShowDownloadPrompt()){return Media.createDownloadPrompt(e,f,d)}return false}},QuickTime:{create:function(g,k,l){var i=this._createObject(k,l),h=null,j=l.id||(g.id?g.id+"_video":"");i.setAttribute("id",j);if(!Media.Detection.IE()&&!Media.Detection.Mobile()){h=this._embed=this._createEmbed(k,l);i.appendChild(h)}else{i.style.behavior="url(#qt_event_source)";if(l.aggressiveCleanup!==false){Event.observe(window,"unload",function(){try{i.Stop()}catch(a){}i.style.display="none";i=null})}}this._configure(h,i,l);i.setAttribute("classid","clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B");Element.addClassName(i,(i.playerType="quicktime"));g.appendChild(i);return h||i},pollForChanges:["load","timeupdate","durationchange","progress","playing","play","pause","ended"],_captions:null,interfaceMethods:{setup:function(){},duration:function(){var c=0;try{c=this.GetDuration()/this.GetTimeScale()}catch(d){}return c||0},time:function(){var c=0;try{c=this.GetTime()/this.GetTimeScale()}catch(d){}return c||0},setTime:function(d){try{this.SetTime(d*this.GetTimeScale())}catch(c){}},volume:function(){return this.GetVolume()/255},setVolume:function(b){this.SetVolume(b*255)},muted:function(){return this.GetMute()},setMuted:function(b){this.SetMute(b)},rate:function(){var d;try{d=this.GetRate()}catch(c){}return d||1},setRate:function(b){this.SetRate(b)},status:function(){this.GetPluginStatus()},percentLoaded:function(){var d=0;try{d=this.GetMaxBytesLoaded()/this.GetMovieSize()}catch(c){}return d},pause:function(){try{this.Stop()}catch(b){}},play:function(){try{this.Play()}catch(b){}},paused:function(){try{return this.GetRate()===0}catch(b){}},ended:function(){return this.ended},src:function(){var c;try{c=this.GetURL()}catch(d){}return c||""},setSrc:function(b){this.SetURL(b);this.SetControllerVisible(false);if(typeof this._embed!="undefined"){this._embed.SetControllerVisible(false)}},timeScale:function(){return this.GetTimeScale()},movieType:function(){return"QuickTime"},getContainer:function(){return this._container},setTrackTextSpan:function(b){},setCaptionsAvailable:function(i,e){try{var g=this.GetTrackCount(),j;for(j=1;j<=g;j++){if("Closed Caption"===this.GetTrackType(j)){Media.Spec.QuickTime._captions=j;if(typeof i!="undefined"){i()}}}}catch(h){}},enableCaptions:function(){try{if(Media.Spec.QuickTime._captions==="undefined"){this.setCaptionsAvailable()}this.SetTrackEnabled(Media.Spec.QuickTime._captions,true);this.captionsEnabled=true}catch(b){}},disableCaptions:function(){try{this.SetTrackEnabled(Media.Spec.QuickTime._captions,false);this.captionsEnabled=false}catch(b){}}},_configure:function(g,h,j){if(!j){return}var i=null,f=null;for(i in j){if(j.hasOwnProperty(i)){f=i.toLowerCase();switch(f){case ("type"):case ("src"):case ("data"):case ("classid"):case ("name"):case ("id"):case ("postdomevents"):case ("saveembedtags"):case ("factory"):case ("aggressiveCleanup"):break;case ("class"):Element.addClassName(h,j[i]);break;case ("innerId"):if(g){g.setAttribute("id",j[i])}break;case ("autoplay"):this._addParameter(h,"autostart",j[i]);this._addParameter(g,"autostart",j[i]);if(g){g.setAttribute("autoplay",j[i])}break;case ("width"):case ("height"):h.setAttribute(f,j[i]);if(g){g.setAttribute(f,j[i])}break;default:this._addParameter(h,f,j[i]);this._addParameter(g,f,j[i]);break}}}},_addParameter:function(e,f,h){if(!e){return}var g=document.createElement("param");g.setAttribute("value",h);g.setAttribute("name",f);e.appendChild(g);g=null},_createEmbed:function(d,e){var f=document.createElement("embed");f.setAttribute("src",d);f.setAttribute("type","video/quicktime");if(!Media.Detection.Firefox()){f.setAttribute("wmode","transparent")}f.setAttribute("postdomevents",true);f.setAttribute("controller",false);f.setAttribute("showlogo",false);f.setAttribute("scale","tofit");f.setAttribute("autoplay",false);if(e){if(!isNaN(parseInt(e.width,10))){f.setAttribute("width",e.width)}if(!isNaN(parseInt(e.height,10))){f.setAttribute("height",e.height)}}return f},_createObject:function(h,e){var f=document.createElement("object"),g="7,3,0,0";if(Media.Detection.Mobile()&&e.posterFrame){this._addParameter(f,"src",e.posterFrame);this._addParameter(f,"href",h);this._addParameter(f,"target","myself")}else{this._addParameter(f,"src",h);if(!Media.Detection.Firefox()){this._addParameter(f,"wmode","transparent")}}f.setAttribute("id",name);if(!Media.Detection.Mobile()){this._addParameter(f,"showlogo",false);this._addParameter(f,"scale","tofit");this._addParameter(f,"saveembedtags",true);this._addParameter(f,"postdomevents",true)}if(null!==e&&(typeof e.codebase!=="undefined")&&""!==e.codebase){g=e.codeBase}f.setAttribute("codebase","http://www.apple.com/qtactivex/qtplugin.cab#version="+g);return f}}};Media.VideoInterface=function(k,m){var q=k,n=m,r,p,l,o,j;return{videoTitle:function(){return p},setVideoTitle:function(a){p=a},videoUrl:function(){return l},setVideoUrl:function(a){l=a},videoDescription:function(){return o},setVideoDescription:function(a){o=a},videoPosterFrame:function(){return j},setVideoPosterFrame:function(a){j=a},object:function(){return q},setObject:function(a){q=a},setDelegate:function(a){n=a},setup:function(){},override:function(b){var a;function c(d,e){return function(){return e.apply(q,arguments)}}for(a in b){this[a]=c(a,b[a])}return this},registerEvent:function(b,d,c){if(!c&&typeof(d)=="function"){c=d;d=null}var a=d||b;Event.observe(q,a,function(e){if(c){c.apply(this)}this.messageDelegate(b)}.bind(this))},pollForChanges:function(a){if(r){window.clearInterval(r)}if(a){r=window.setInterval(function(){for(var c=0,b;b=a[c];c++){this.messageDelegate(b)}}.bind(this),480)}},messageDelegate:function(b){if(!n){return}b=b.charAt(0).toUpperCase()+b.substring(1);var a="videoReceived"+b+"Event";if(a in n){n[a](this)}}}};Media.Controller=function(Q){var G=Q,B,C,L,z,J,E,S,R=false,I,N=false,H=false,P=false,O=true,D=true,K=false,x=false,T=false;function A(c){if(!z||x){return}z.show();window.clearTimeout(J);var a=z.element;var b=c.target||c.srcElement;if(b==a){J=window.setTimeout(function(){if(z&&typeof z!="undefined"){z.hide()}},2500)}}function M(a){if(!z){return}window.clearTimeout(J);J=window.setTimeout(function(){if(z){z.hide()}},50)}function y(a){if(!z){return}window.clearTimeout(J);J=window.setTimeout(function(){if(z){z.hide()}},50)}function y(a){if(!z||x){return}window.clearTimeout(J);z.show()}function F(a){if(!z){return}window.clearTimeout(J);z.show()}return{_send:function(b,a){if(B&&b in B){a=[this].concat(a);return B[b].apply(B,a)}},_fireEvent:function(a,b){Media.Controller.fireEvent(a,b)},reset:function(){R=false;N=false;H=false;P=false},setDelegate:function(a){B=a},setVideo:function(a){N=false;H=false;C=a;S=C.duration()||0;if(z&&z.videoObjectHasChanged){z.videoObjectHasChanged(C)}return this},setVideoSrc:function(a){L=a},video:function(){return C},setControlPanel:function(a){setTimeout(function(){z=a;if(z){z.delegate=this;Event.observe(Q,"mousemove",A);Event.observe(Q,"mouseout",M);Event.observe(Q,"mouseover",y);Event.observe(z.settingsMenu,"mouseover",F);C.setTrackTextSpan(z.trackText);if(!z.settingsControlsAreSet){this.configureSettingsControls(L);z.settingsControlsAreSet=true}z.element.parentNode.parentNode.style.width=this.currentWidth+"px";z.element.parentNode.parentNode.style.height=this.currentHeight+"px";this.setVideoSizeForWidthAndHeight(this.currentWidth,this.currentHeight);this.setSizeAnimation(true)}else{Event.stopObserving(Q,"mousemove",A);Event.stopObserving(Q,"mouseout",M);Event.stopObserving(Q,"mouseover",y)}return this}.bind(this),1)},beginSeeking:function(){if(R){return}R=true;I=!C.paused()&&this.rate()==1;this.pause();var a=C.time();this._send("didStartJogging",a);this._fireEvent("QuickTime:didStartJogging",{controller:this,time:a})},endSeeking:function(){var b=C.time(),a=C.duration();R=false;this._send("didStopJogging",b);this._fireEvent("QuickTime:didStopJogging",{controller:this,time:b});if(I){if(b!=a){this.play()}else{H=false;this.videoReceivedEndedEvent(this)}}},time:function(){return C.time()||this._lastTime||0},setTime:function(a){C.setTime(a);this.videoReceivedTimeupdateEvent()},duration:function(){if(!S){S=C.duration()}return S},volume:function(){return C.volume()},setVolume:function(a){C.setMuted(false);C.setVolume(a);if(typeof z!="undefined"&&z!=null){z.volumeControlSetting=a}},setMuted:function(a){C.setMuted(a);if(typeof z!="undefined"&&z!=null){z.volumeControlSetting=0}},toggleMute:function(){var a=C.muted();if(a){this.setMuted(false)}else{this.setMuted(true)}return !a},playPause:function(){var a=C.paused(),b=this.rate();if(a&&b===1){this.play()}else{if(b!==1){this.setRate(1)}else{this.pause()}}return C.paused()},playing:function(){return P},play:function(){C.play();P=true;O=false},pause:function(){C.pause();P=false;D=false},stop:function(){C.pause();P=false;D=false;H=true},setRate:function(a){C.setRate(a);if(a!==1||a!==0){K=true}else{K=false}},rate:function(){return C.rate()},src:function(){return C.src()},setSrc:function(a){C.setSrc(a);this._currentSrc=a},setSizeAnimation:function(a){T=a},_currentSrc:false,setVideoSizeForSrc:function(b){var c=this.moviePath(),a=b.substring(b.lastIndexOf("/")+1,b.length);srcToSet=c+a,newWidth=a.substring(a.lastIndexOf("_")+1,a.lastIndexOf("x")),newHeight=a.substring(a.lastIndexOf("x")+1,a.lastIndexOf("."));if(T===false||(C.percentLoaded()<1||(C.percentLoaded()>=1&&(this._currentSrc!=false&&L!=this._currentSrc)))){if(T===true){this.setSizeAnimation(false)}this.setSrc(srcToSet)}this.setVideoSizeForWidthAndHeight(newWidth,newHeight)},setVideoSizeForWidthAndHeight:function(b,g){if(typeof z!="undefined"&&typeof C.object()!="undefined"){var e=C.object();function a(){if(typeof z!="undefined"&&(z.controllerType==="slim"||z.controllerType==="short-slim")){if(z.controllerType==="short-slim"&&b>450){Element.removeClassName(z.container,"short-slim");z.controllerType="slim"}if(z.controllerType==="slim"&&b<=450){Element.addClassName(z.container,"short-slim");z.controllerType="short-slim"}z.setTrackContainerWidth()}}if(AC.Detector.isIEStrict()){var d=parseInt(g/2);C.object().style.marginTop="-"+d+"px";z.element.style.marginTop="-"+d+"px"}if(C.percentLoaded()<1||T===false||Media.Detection.Chrome()){e.width=b;e.height=g;if(C.movieType()!="Video"&&typeof e.parentNode!=null){e.parentNode.width=b;e.parentNode.height=g}z.container.style.width=b+"px";z.container.style.height=g+"px";z.element.style.width=b+"px";z.element.style.height=g+"px";if(AC.Detector.isIEStrict()){var d=parseInt(g/2);e.style.marginTop="-"+d+"px";z.element.style.marginTop="-"+d+"px"}}else{if(Media.Detection.CSSTransitions()===true){e.style.width=b+"px";e.style.height=g+"px";z.container.style.width=b+"px";z.container.style.height=g+"px";z.element.style.width=b+"px";z.element.style.height=g+"px"}else{var f=[];if(z.controllerType==="slim"||z.controllerType==="short-slim"){z._hiding=true;z._showing=false;z.fadeElement.style.opacity="0";z.fadeElement.style.visibility="hidden";Element.removeClassName(z.settingsMenu,z.settingsMenu.baseClassName+"-hovered");x=true}z.resetSettingsMenus();f.push(new Effect.Morph(e,{sync:true,style:{width:b+"px",height:g+"px"}}));if(C.movieType!="Video"&&typeof e.parentNode!=null){f.push(new Effect.Morph(e.parentNode,{sync:true,style:{width:b+"px",height:g+"px"}}))}f.push(new Effect.Morph(z.container,{sync:true,style:{width:b+"px",height:g+"px"}}));f.push(new Effect.Morph(z.element,{sync:true,style:{width:b+"px",height:g+"px"}}));var c=document.createElement("div");Element.addClassName(c,"ACMediaRedraw");new Effect.Parallel(f,{duration:0.8,beforeStart:function(){if(AC.Detector.isIEStrict()){var h=parseInt(e.offsetHeight/2);e.parentNode.style.top="50%";e.style.top="0";z.element.style.top="0";e.style.marginTop="-"+h+"px";z.element.style.marginTop="-"+h+"px";z.element.appendChild(c)}},afterUpdate:function(){x=true;if(AC.Detector.isIEStrict()){var h=parseInt(e.offsetHeight/2);e.parentNode.style.top="50%";e.style.top="0";z.element.style.top="0";e.style.marginTop="-"+h+"px";z.element.style.marginTop="-"+h+"px"}},afterFinish:function(){if(AC.Detector.isIEStrict()){var h=parseInt(g/2);e.parentNode.style.top="50%";e.style.top="0";z.element.style.top="0";e.style.marginTop="-"+h+"px";z.element.style.marginTop="-"+h+"px"}a();window.clearTimeout(E);E=window.setTimeout(function(){z.fadeElement.style.visibility="visible";z.fadeElement.style.opacity="1";z._hiding=false;z._showing=false;x=false},50)}})}}a()}this.currentWidth=b;this.currentHeight=g},timeScale:function(){return C.timeScale()},movieType:function(){return C.movieType()},moviePath:function(){var a,b="";if(typeof L!="undefined"&&L.length>0){a=L.substring(0,L.lastIndexOf("_"))+".html"}else{return}if(a.match(/\w+:\/\//i)){if((window.location.href.match(/\w+:\/\/ic/i)||window.location.href.match(/\w+:\/\/www-dev/i))&&a.indexOf("/105")<0){a=a.replace(/\w+:\/\/[^\/]+/i,"/105")}else{a=a.replace(/\w+:\/\/[^\/]+/i,"")}}b=a.substring(0,(a.lastIndexOf("/")+1));return b},setCaptionsAvailable:function(a){var b=this.enableCaptionsControl.bind(this);C.setCaptionsAvailable(b,a)},enableCaptionsControl:function(){if(z&&typeof z.enableCaptionsControl!=="undefined"){z.enableCaptionsControl();return true}return false},enableCaptions:function(){C.enableCaptions();this._fireEvent("QuickTime:didSetClosedCaptions",{controller:this,enabled:true})},disableCaptions:function(){C.disableCaptions();this._fireEvent("QuickTime:didSetClosedCaptions",{controller:this,enabled:false})},resetCaptions:function(){C.disableCaptions()},setSizesAvailable:function(b){this.sizesMenuOptions=b;for(var a=0,c;c=this.sizesMenuOptions[a];a++){this.sizesMenuOptions["size_"+c.type]=c}this.enableSizesControl()},enableSizesControl:function(){if(z&&typeof z.enableSizesControl!=="undefined"){if(this.sizesMenuOptions.length>1){z.buildSizesMenu(this.sizesMenuOptions);z.setSizesAvailable();z.enableSizesControl();return true}}return false},setDownloadAvailable:function(b){this.downloadMenuOptions=b;for(var a=0,c;c=this.downloadMenuOptions[a];a++){this.downloadMenuOptions["download_"+c.type]=c}this.enableDownloadControl()},enableDownloadControl:function(){if(z&&typeof z.enableDownloadControl!=="undefined"){if(this.downloadMenuOptions.length>0){z.buildDownloadMenu(this.downloadMenuOptions);z.setDownloadAvailable();z.enableDownloadControl();return true}}return false},setShareAvailable:function(h){if(z&&typeof z.enableShareControl!=="undefined"&&ac_media_language.sharemenu){var d=document.getElementsByTagName("head").item(0),b=ac_media_language.sharemenu,g=this;for(var f=0,c;c=b[f];f++){var a=document.createElement("script"),e;a.setAttribute("type","text/javascript");a.pluginName=c.id;e=function(){if(typeof window.event!="undefined"){var i=window.event.srcElement;if(!window.event||((i=window.event.srcElement)&&(i.isLoaded||((typeof i.isLoaded==="undefined")&&((i.readyState=="complete")||(i.readyState=="loaded")))))){if(i&&!i.isLoaded){i.onreadystatechange=null;i.isLoaded=true}Event._domReady()}}};if(a.addEventListener){a.addEventListener("load",e,false)}else{if(typeof a.onreadystatechange==="function"){a.onreadystatechange=function(){if(this.readyState=="complete"){e()}}}else{a.onreadystatechange=e}}a.setAttribute("src",c.plugin);d.appendChild(a);b[f].localScript=a}}},configureSettingsControls:function(e){var b,c=document.body.parentNode.getAttribute("lang"),d=getLang(c),a=this.moviePath();if(typeof e!="undefined"&&e.length>0){b=e.substring(0,e.lastIndexOf("_"))+".json"}else{return}if(b.match(/\w+:\/\//i)){if((window.location.href.match(/\w+:\/\/ic/i)||window.location.href.match(/\w+:\/\/www-dev/i))&&b.indexOf("/105")<0){b=b.replace(/\w+:\/\/[^\/]+/i,"/105")}else{b=b.replace(/\w+:\/\/[^\/]+/i,"")}}},setSettingsControlsAvailableForLanguageAndPath:function(a,g){var k=this.configSettings.metadata.captions,h=this.configSettings.metadata.sizes,i=this.configSettings.metadata.downloads,j=this.configSettings.metadata.share||true,m=this.configSettings.metadata.lang,d=this.configSettings.metadata.title,f=this.configSettings.metadata.description,b=this.configSettings.src,l=this.configSettings.posterframe||"http://images.apple.com/global/elements/overlay/overlay_movie_endstate_640x400_20081014.jpg";if(typeof d!="undefined"){C.setVideoTitle(d)}if(typeof b!="undefined"){C.setVideoUrl(b)}if(typeof f!="undefined"){C.setVideoDescription(f)}if(typeof l!="undefined"){C.setVideoPosterFrame(l)}if(typeof k!="undefined"){var e=k.substring(k.lastIndexOf("/"),k.length),c=g+((e[0]==="/")?e.substring(1,e.length):e);z.captionsUrl=c;this.setCaptionsAvailable(z.captionsUrl)}if(typeof h!="undefined"){this.setSizesAvailable(h)}if(typeof downloadsList!="undefined"){this.setDownloadAvailable(i)}if(j){this.setShareAvailable()}if(typeof c=="undefined"&&typeof h=="undefined"&&typeof downloadsList=="undefined"&&typeof z!="undefined"){z.setTrackContainerWidth()}},videoReceivedPlayingEvent:function(a){if(!N&&(this.movieType()=="Video"||(this.time()>0&&this.duration!=0))){if(z&&typeof z.enableBasicControls!=="undefined"){z.enableBasicControls();z.setSettingsControls();if(typeof z.captionsUrl!="undefined"&&!z.captionsControl.isEnabled){this.setCaptionsAvailable(z.captionsUrl)}}P=true;Element.removeClassName(this.container,this.movieLoadingPanelClass);N=true;this._send("didBecomePlayable");this._fireEvent("QuickTime:canplaythrough",{controller:this});this._send("didBegin");this._fireEvent("QuickTime:begin",{controller:this});J=window.setTimeout(function(){if(z&&typeof z!="undefined"){z.hide()}},500)}},videoReceivedLoadEvent:function(b){if(z){var a=C.percentLoaded();z.updatePercentLoaded(a);if(a<=1&&typeof z.captionsUrl!="undefined"&&!z.captionsControl.isEnabled){this.setCaptionsAvailable(z.captionsUrl)}}},videoReceivedEndedEvent:function(a){var b=C.time();S=C.duration();if(H){return}if(N&&((b>=S&&S!=0)||(C.movieType()=="SBVDP"&&S!=0&&b>=(S-0.5)))){H=true;this.videoReceivedTimeupdateEvent(this);if(z){z.resetSettingsMenus();if(AC.Detector.isIEStrict()){var c=C.object();c.parentNode.style.width="";c.parentNode.style.height="";c.parentNode.style.top="";c.style.top="";z.element.style.top="";c.style.marginTop="";z.element.style.marginTop=""}}if(!R){this._send("onMovieFinished");this._send("didEnd");this._fireEvent("QuickTime:end",{controller:this})}}},videoReceivedPlayEvent:function(a){if(O){return}O=true;this._send("didStart");this._fireEvent("QuickTime:start",{controller:this})},videoReceivedPauseEvent:function(a){if(D){return}D=true;this._send("didStop");this._fireEvent("QuickTime:stop",{controller:this})},videoReceivedTimeupdateEvent:function(a){var b=C.time()||0;if(z){z.updateTime(this.time())}if(this._lastTime!=this.time()){this._fireEvent("QuickTime:didPlayProgress",{controller:this,currentTime:this.time(),duration:this.duration()})}this._lastTime=this.time()},videoReceivedProgressEvent:function(a){if(z){z.updatePercentLoaded(C.percentLoaded())}},videoReceivedDurationchangeEvent:function(a){if(z){z.updateRemainingTime(this.duration()-this.time())}}}};Media.Controller.fireEvent=function(d,f){var e=$(document.body);if("fire" in e){e.fire(d,f)}};Media.ControlsWidget=function(j,i,n){this.settingsControlsAreSet=false;this.container=j;this.delegate=i;this.options=n;Event.observe(document.body,"PluginClass:Added",this.registerPluginClass.bind(this));for(var m=0,k;k=Media.ControlsWidget.pluginTypes[m];m++){for(var h=0,l;l=k[h];h++){this.registerPluginClass(l)}}this._createTemplate();this._setupControls()};Media.ControlsWidget.registerPluginClass=function(f){var h=f.prototype.name(),g=f.prototype.pluginType(),e;this.pluginTypes(g);this.pluginClassesForType;if(!(e=Media.ControlsWidget._pluginTypes[g])||!Media.ControlsWidget._pluginTypes.hasOwnProperty(g)){e=[];Media.ControlsWidget._pluginTypes[g]=e;Media.ControlsWidget._pluginTypes.push(g)}if(!e.hasOwnProperty(h)){e[h]=h;e.push(h)}Media.Controller.fireEvent("PluginClass:Added",{plugin:f,name:h,type:g})};Media.ControlsWidget._pluginTypes=[];Media.ControlsWidget.pluginTypes=function(b){return this._pluginTypes};Media.ControlsWidget.pluginClassesForType=function(b){return this.pluginTypes[b]};Media.ControlsWidget.TEMPLATE='<div id="ACMedia-controls" class="ACMediaControls">	<div id="ACMedia-alert-display-container" class="ACMediaAlertDisplay"></div>	<div id="ACMedia-track-text" class="ACMediaTrackText"><span id="ACMedia-track-text-span"></span></div>    <div id="ACMedia-controls-panel" class="mediaControllerPanel">		<div class="slim-left-cap"></div>        <div id="ACMedia-media-controller" class="ACMediaController">            <div id="ACMedia-volume-mute" class="volumeMute"></div>            <div class="volumePanel">                <div id="ACMedia-volume-track" class="volumeTrack">                    <div id="ACMedia-control-volume-progress" class="volumeTrackProgress"></div>                    <div id="ACMedia-volume-handle" class="volumePlayHead"></div>                </div>            </div>			<div id="ACMedia-volume-full" class="volumeFull"></div>            <div id="ACMedia-control-fastbackward" class="fastBackward"></div>            <div id="ACMedia-control-play-pause"></div>            <div id="ACMedia-control-fastforward" class="fastForward"></div>			<div id="ACMedia-track-container" class="track-container">      	      <div id="ACMedia-control-time-display" class="timeDisplay"><span id="ACMedia-min-played">00</span>:<span id="ACMedia-sec-played">00</span></div>	            <div class="trackPanel">	                <div id="ACMedia-control-track" class="track">	                    <div id="ACMedia-control-loaded-progress" class="loadedProgress"></div>	                    <div id="ACMedia-control-track-progress" class="trackProgress"></div>	                    <div id="ACMedia-control-playhead" class="playHead"></div>	                </div>					<div id="ACMedia-track-end-cap" class="track-right-cap"></div>	            </div>	            <div id="ACMedia-control-duration-display" class="durationDisplay">-<span id="ACMedia-min-remain">00</span>:<span id="ACMedia-sec-remain">00</span></div>			</div>			<div id="ACMedia-settings-controls" class="settingsControls">				<div id="ACMedia-captions-control" class="captionsControl"></div>				<div id="ACMedia-sizes-control" class="sizesControl"></div>				<div id="ACMedia-download-control" class="downloadControl"></div>				<div id="ACMedia-share-control" class="shareControl"></div>			</div>        </div>		<div class="slim-right-cap"></div>    </div></div>';Media.ControlsWidget.show=function(d){if(d.fadeElement&&!d._showing){if(d._effect){try{d._effect.cancel()}catch(c){}delete d._effect}d._showing=true;d._hiding=false;if(d.fadeElement){if(Media.Detection.CSSTransitions()===true){d._effect=function(){Element.removeClassName(d.fadeElement,"fade")};d._effect()}else{d._effect=new Effect.Opacity(d.fadeElement,{to:1,duration:0.5,afterFinish:function(){d._showing=false}})}}}};Media.ControlsWidget.hide=function(d){if(d.fadeElement&&!d._hiding){if(d._effect){try{d._effect.cancel()}catch(c){}delete d._effect}d._hiding=true;d._showing=false;if(d.fadeElement){if(Media.Detection.CSSTransitions()===true){d._effect=function(){d.resetSettingsMenus();Element.addClassName(d.fadeElement,"fade")};d._effect()}else{d._effect=new Effect.Opacity(d.fadeElement,{to:0,duration:0.5,beforeStart:function(){d.resetSettingsMenus()},afterFinish:function(){d._hiding=false}})}}}};Media.ControlsWidget.prototype={delegate:null,element:null,_plugins:[],_buildControlWithTitleOptions:function(g,h){var e=document.createElement("li"),f=document.createElement("a");Element.addClassName(e,g);if(typeof h!="undefined"&&typeof h.url!="undefined"&&typeof h.name!="undefined"){f.setAttribute("href",h.url);f.innerHTML=h.name;e.appendChild(f)}else{return}e.baseClassName=e.baseClassName||e.className;Event.observe(e,"mousedown",function(a){Element.addClassName(this,this.baseClassName+"-active")});Event.observe(e,"mouseup",function(a){Element.removeClassName(this,this.baseClassName+"-active")});Event.observe(document.documentElement,"mouseup",function(a){Element.removeClassName(this,this.baseClassName+"-active")});Event.observe(e,"mouseover",function(a){Element.addClassName(this,this.baseClassName+"-hover")});Event.observe(e,"mouseout",function(a){Element.removeClassName(this,this.baseClassName+"-hover")});return e},_sizesMenuControls:[],selectSizeFromMenu:function(f){this._unselectMenu();this._unselectControl(this.sizesControl);for(var d=0,e;e=this._sizesMenuControls[d];d++){(e===f)?this._selectControl(e):this._unselectControl(e)}this._send("setVideoSizeForSrc",f.optionsUrl);this.sizesControlSetting=f},_getSizesMenuControl:function(e,g,f){var h=this._buildControlWithTitleOptions("size"+g,{url:f.src,name:(ac_media_language[e]||g)+" "+f.width+"x"+f.height});h.appendChild(document.createElement("span"));h.optionsUrl=f.src;Event.observe(h,"click",function(a){Event.stop(a);this.selectSizeFromMenu(h)}.bindAsEventListener(this));if(this.element.offsetWidth==f.width&&this.element.offsetHeight==f.height){this._selectControl(h)}return h},buildSizesMenu:function(b){this.originalElementWidth=this.element.offsetWidth;this.originalElementHeight=this.element.offsetHeight;if(Media.Detection.CSSTransitions()===true){this.element.style.width=this.originalElementWidth+"px";this.element.style.height=this.originalElementHeight+"px"}if(typeof b.size_hd!="undefined"&&this.originalElementWidth>=b.size_hd.width&&this.originalElementHeight>=b.size_hd.height){this.sizesHDControl=this._getSizesMenuControl("hd","HD",b.size_hd);this._sizesMenuControls.push(this.sizesHDControl);this.sizesMenu.appendChild(this.sizesHDControl)}if(typeof b.size_large!="undefined"&&this.originalElementWidth>=b.size_large.width&&this.originalElementHeight>=b.size_large.height){this.sizesLargeControl=this._getSizesMenuControl("large","Large",b.size_large);this._sizesMenuControls.push(this.sizesLargeControl);this.sizesMenu.appendChild(this.sizesLargeControl)}if(typeof b.size_medium!="undefined"&&this.originalElementWidth>=b.size_medium.width&&this.originalElementHeight>=b.size_medium.height){this.sizesMediumControl=this._getSizesMenuControl("medium","Medium",b.size_medium);this._sizesMenuControls.push(this.sizesMediumControl);this.sizesMenu.appendChild(this.sizesMediumControl)}if(typeof b.size_small!="undefined"&&this.originalElementWidth>=b.size_small.width&&this.originalElementHeight>=b.size_small.height){this.sizesSmallControl=this._getSizesMenuControl("small","Small",b.size_small);this._sizesMenuControls.push(this.sizesSmallControl);this.sizesMenu.appendChild(this.sizesSmallControl)}return this._sizesMenuControls},_downloadMenuControls:[],_getDownloadMenuControl:function(l,i,g){var h=(i.match(/\//))?i.substring(0,i.indexOf("/")):i,k="mb";var j=this._buildControlWithTitleOptions("download"+h,{url:g.src,name:(ac_media_language[l]||i)+" "+g.size+(ac_media_language[k]||"MB")});Event.observe(j,"click",function(a){Event.stop(a);this._unselectMenu();this._unselectControl(this.downloadControl);document.location.href=g.src}.bindAsEventListener(this));return j},buildDownloadMenu:function(b){if(typeof b.download_hd!="undefined"){this.downloadHDControl=this._getDownloadMenuControl("hd","HD",b.download_hd);this._downloadMenuControls.push(this.downloadHDControl);this.downloadMenu.appendChild(this.downloadHDControl)}if(typeof b.download_large!="undefined"){this.downloadLargeControl=this._getDownloadMenuControl("large","Large",b.download_large);this._downloadMenuControls.push(this.downloadLargeControl);this.downloadMenu.appendChild(this.downloadLargeControl)}if(typeof b.download_ipod!="undefined"){this.downloadiPodControl=this._getDownloadMenuControl("ipod","iPod/iPhone",b.download_ipod);this._downloadMenuControls.push(this.downloadiPodControl);this.downloadMenu.appendChild(this.downloadiPodControl)}return this._downloadMenuControls},_shareMenuControls:[],buildShareMenu:function(f){var i=f.name(),g=f.url();var h=this[i.toLowerCase()+"Control"]=this._buildControlWithTitleOptions(i,{url:g,name:i});var j=this._send("video");Event.observe(h,"click",function(a){Event.stop(a);f.share(j)});this._shareMenuControls.push(h);this.shareMenu.appendChild(h);Element.addClassName(h,h.baseClassName+"-enabled");return this._shareMenuControls},_registeredPlugins:[],registerPluginClass:function(f){var j=new f.memo.plugin(),i=j.name(),g=j.actionName(),h=j.pluginType();this._registeredPlugins.push(j);this.buildShareMenu(j);if(!this.shareEnabled){this.setShareAvailable();this.enableShareControl()}},_createTemplate:function(){function d(a){var f=document.createElement("div"),b;f.innerHTML=a;b=f.firstChild;return b}this.controllerType="regular";if(Media.Detection.Firefox()||(typeof this.options!="undefined"&&this.options.slimController===true)){Element.addClassName(this.container,"slim");this.controllerType="slim"}if(this.container.offsetWidth<450&&!AC.Detector.isIEStrict()){Element.addClassName(this.container,"slim");Element.addClassName(this.container,"short-slim");this.controllerType="short-slim"}var c=new Date();this.timestamp=c.getTime();this.container.appendChild(d(Media.ControlsWidget.TEMPLATE));this.element=document.getElementById("ACMedia-controls");this.element.id="ACMedia-controls_"+this.timestamp},_setupControls:function(){var l=this.timestamp;this.fadeElement=o("ACMedia-controls-panel");this.trackEndCap=o("ACMedia-track-end-cap");function j(a){var b=a.id;a.id=b+"_"+l;return a.id}function m(a){a.baseClassName=a.baseClassName||a.className}function i(a){m(a);function c(d){Element.addClassName(this,this.baseClassName+"-active")}function b(d){Element.removeClassName(this,this.baseClassName+"-active")}Event.observe(a,"mousedown",c.bind(a));Event.observe(a,"mouseup",b.bind(a));Event.observe(document.documentElement,"mouseup",b.bind(a))}function n(b){if(!b.baseClassName){m(b)}function a(d){Element.addClassName(this,b.baseClassName+"-hover")}function c(d){Element.removeClassName(this,b.baseClassName+"-hover")}Event.observe(b,"mouseover",a.bind(b));Event.observe(b,"mouseout",c.bind(b))}function o(a){var b=document.getElementById(a),c=j(b);return b}this.toggleControl=o("ACMedia-control-play-pause");this.playControl=document.createElement("div");Element.addClassName(this.playControl,"play");i(this.playControl);this.playControl.id="ACMedia-play-control_"+this.timestamp;Event.observe(this.playControl,"click",this.play.bind(this));this.playControl.innerHTML=ac_media_language.play||"Play";this.playControl.style.display="none";this.pauseControl=document.createElement("div");Element.addClassName(this.pauseControl,"pause");i(this.pauseControl);this.pauseControl.id="ACMedia-pause-control_"+this.timestamp;Event.observe(this.pauseControl,"click",this.pause.bind(this));this.pauseControl.innerHTML=ac_media_language.pause||"Pause";this.pauseControl.style.display="none";Element.show(this._send("playing")?this.pauseControl:this.playControl);var p=this.toggleControl;p.appendChild(this.playControl);p.appendChild(this.pauseControl);this.fastBackwardControl=o("ACMedia-control-fastbackward");this.fastBackwardControl.innerHTML=ac_media_language.fastreverse||"Fast Reverse";Event.observe(this.fastBackwardControl,"click",this.fastBackward.bind(this));i(this.fastBackwardControl);this.fastForwardControl=o("ACMedia-control-fastforward");this.fastForwardControl.innerHTML=ac_media_language.fastforward||"Fast Forward";Event.observe(this.fastForwardControl,"click",this.fastForward.bind(this));i(this.fastForwardControl);this.volumeMuteControl=o("ACMedia-volume-mute");this.volumeMuteControl.innerHTML=ac_media_language.mutevolume||"Mute Volume";Event.observe(this.volumeMuteControl,"click",this.muteVolume.bind(this));i(this.volumeMuteControl);this.volumeFullControl=o("ACMedia-volume-full");this.volumeFullControl.innerHTML=ac_media_language.fullvolume||"Full Volume";Event.observe(this.volumeFullControl,"click",this.fullVolume.bind(this));i(this.volumeFullControl);this.settingsControls=o("ACMedia-settings-controls");m(this.settingsControls);this.captionsControl=o("ACMedia-captions-control");if(!AC.Detector.isIEStrict()){this.captionsControl.innerHTML=ac_media_language.captionscontrol||"Closed Captions"}Event.observe(this.captionsControl,"click",this.toggleCaptions.bind(this));i(this.captionsControl);this.sizesControl=o("ACMedia-sizes-control");if(!AC.Detector.isIEStrict()){this.sizesControl.innerHTML=ac_media_language.sizescontrol||"Video Size"}this.sizesControl.controlName="sizes";Event.observe(this.sizesControl,"click",this.toggleSizesMenu.bind(this));i(this.sizesControl);Event.observe(this.sizesControl,"mouseover",this.mouseoverSettingsControl.bind(this,this.sizesControl));Event.observe(this.sizesControl,"mouseout",this.mouseoutSettingsControl.bindAsEventListener(this,this.sizesControl));this.downloadControl=o("ACMedia-download-control");if(!AC.Detector.isIEStrict()){this.downloadControl.innerHTML=ac_media_language.downloadcontrol||"Download Video"}this.downloadControl.controlName="download";Event.observe(this.downloadControl,"click",this.toggleDownloadMenu.bind(this));i(this.downloadControl);Event.observe(this.downloadControl,"mouseover",this.mouseoverSettingsControl.bind(this,this.downloadControl));Event.observe(this.downloadControl,"mouseout",this.mouseoutSettingsControl.bindAsEventListener(this,this.downloadControl));this.shareControl=o("ACMedia-share-control");if(!AC.Detector.isIEStrict()){this.shareControl.innerHTML=ac_media_language.sharecontrol||"Share Video"}this.shareControl.controlName="share";Event.observe(this.shareControl,"click",this.toggleShareMenu.bind(this));i(this.shareControl);Event.observe(this.shareControl,"mouseover",this.mouseoverSettingsControl.bind(this,this.shareControl));Event.observe(this.shareControl,"mouseout",this.mouseoutSettingsControl.bindAsEventListener(this,this.shareControl));this.settingsMenu=document.createElement("div");if(Media.Detection.CSSBorderRadius()===false){this.settingsMenuRoundRect=this.getRoundRectForArcAndOpacity(0.05,0.9);this.settingsMenu.appendChild(this.settingsMenuRoundRect)}this.settingsMenu.id="ACMedia-settings-menu_"+this.timestamp;Element.addClassName(this.settingsMenu,"ACMediaSettingsMenu");document.body.appendChild(this.settingsMenu);this.settingsMenu.baseClassName="ACMediaSettingsMenu";this.settingsMenuCarrot=document.createElement("div");Element.addClassName(this.settingsMenuCarrot,"ACMediaSettingsMenuCarrot");this.settingsMenu.appendChild(this.settingsMenuCarrot);this.settingsMenuTitle=document.createElement("div");Element.addClassName(this.settingsMenuTitle,"ACMediaSettingsMenuTitle");this.settingsMenu.appendChild(this.settingsMenuTitle);this.mediaController=o("ACMedia-media-controller");this.speedDisplayAlert=document.createElement("div");this.captionsDisplayAlert=document.createElement("div");Element.addClassName(this.captionsDisplayAlert,"ACMediaCaptionsDisplay");this.alertDisplayContainer=o("ACMedia-alert-display-container");this.trackText=o("ACMedia-track-text");this.trackTextSpan=o("ACMedia-track-text-span");this.volumeThumb=o("ACMedia-volume-handle");this.volumeTrack=o("ACMedia-volume-track");this.volumeProgress=o("ACMedia-control-volume-progress");this.trackContainer=o("ACMedia-track-container");this.playhead=o("ACMedia-control-playhead");this.track=o("ACMedia-control-track");this.trackProgress=o("ACMedia-control-track-progress");this.controlLoadedProgress=o("ACMedia-control-loaded-progress");this.mediaTimeDisplay=o("ACMedia-control-time-display");this.minutesPlayed=o("ACMedia-min-played");this.secondsPlayed=o("ACMedia-sec-played");this.mediaDurationDisplay=o("ACMedia-control-duration-display");this.minutesRemaining=o("ACMedia-min-remain");this.secondsRemaining=o("ACMedia-sec-remain");this.settingsMenuList=document.createElement("div");this.settingsMenu.appendChild(this.settingsMenuList);this.sizesMenu=document.createElement("ul");this.sizesMenu.menuName="sizes";this.sizesMenu.menuTitle=this.sizesControl.menuTitle=ac_media_language.sizescontrol||"Video Size";this.downloadMenu=document.createElement("ul");this.downloadMenu.menuName="download";this.downloadMenu.menuTitle=this.downloadControl.menuTitle=ac_media_language.downloadcontrol||"Download Video";this.shareMenu=document.createElement("ul");this.shareMenu.menuName="share";this.shareMenu.menuTitle=this.shareControl.menuTitle=ac_media_language.sharecontrol||"Share Video";m(this.alertDisplayContainer);m(this.trackText);m(this.mediaTimeDisplay);m(this.mediaDurationDisplay);if(this.controllerType==="slim"||this.controllerType==="short-slim"){var k=parseInt(this.container.offsetWidth-235);if(AC.Detector.isWin()){k=k-10}this.trackContainer.style.width=k+"px"}i(this.volumeThumb);this.createVolumeScrubber();if(!this.scrubber&&this.element!==null){i(this.playhead)}},createTrackScrubber:function(){if(!this.scrubber&&this.element!==null){this.scrubber=new Control.Slider(this.playhead,this.track,{alignX:-5,increment:1,maximum:this.track.offsetWidth,onSlide:function(b){if(!this._seeking){this._seeking=true;this._send("beginSeeking");this.resetRate()}this._send("setTime",b*this._send("duration"));this.trackProgress.style.width=this.playhead.style.left}.bind(this),onChange:function(b){if(this._seeking){this._seeking=false;this._send("endSeeking")}this.trackProgress.style.width=this.playhead.style.left}.bind(this)})}},createVolumeScrubber:function(){if(!this.volumeScrubber&&this.element!==null){this.volumeTrack.style.width="50px";this.volumeScrubber=new Control.Slider(this.volumeThumb,this.volumeTrack,{alignX:6,onSlide:function(b){this._volSeeking=true;this._send("setVolume",b);this.volumeProgress.style.width=this.volumeThumb.style.left}.bind(this),onChange:function(b){this._volSeeking=false;this.volumeProgress.style.width=this.volumeThumb.style.left}.bind(this)});this.volumeScrubber.setValue(1)}},getRoundRectForArcAndOpacity:function(h,e){if(Media.Detection.CSSBorderRadius()!==false){return false}if(typeof this.hasVMLNameSpaceDefined=="undefined"||this.hasVMLNameSpaceDefined==false){this.setVML()}var f=document.createElement("v:roundrect"),g=document.createElement("v:fill");f.setAttribute("arcsize",h);f.setAttribute("fill","true");f.setAttribute("fillcolor","#000000");f.setAttribute("stroked","false");f.className="border-radius-box";g.setAttribute("type","background");g.setAttribute("opacity",e);g.className="border-radius-fill";if(typeof f=="object"){f.appendChild(g);return f}else{return false}},setVML:function(){if(!document.namespaces){return}var h,f,g,e=document.getElementsByTagName("head")[0];this.hasVMLNameSpaceDefined=false;for(h=0,f=document.namespaces.length;h<f;h++){if(document.namespaces(h).name=="v"){this.hasVMLNameSpaceDefined=true;break}}if(!this.hasVMLNameSpaceDefined){document.namespaces.add("v","urn:schemas-microsoft-com:vml")}},setCaptionsAvailable:function(){this._send("setCaptionsAvailable",this.captionsUrl)},_setControlsAvailableForMenu:function(h,f){h.menuListHeight=0;for(var e=0,g;g=f[e];e++){this._enableControl(g);h.menuListHeight+=25}switch(h){case this.sizesControl:this.enableSizesControl();break;case this.downloadControl:this.enableDownloadControl();break;case this.shareControl:this.enableShareControl();break;default:break}},setSizesAvailable:function(){this._setControlsAvailableForMenu(this.sizesControl,this._sizesMenuControls)},setDownloadAvailable:function(){this._setControlsAvailableForMenu(this.downloadControl,this._downloadMenuControls)},setShareAvailable:function(){this._setControlsAvailableForMenu(this.shareControl,this._shareMenuControls)},enableBasicControls:function(){Element.hide(this.playControl);Element.show(this.pauseControl);this._enableControl(this.volumeMuteControl);this._enableControl(this.volumeFullControl);this._enableControl(this.volumeThumb);this._enableControl(this.playControl);this._enableControl(this.pauseControl);this._enableControl(this.playhead);this._enableControl(this.fastBackwardControl);this._enableControl(this.fastForwardControl);this.createTrackScrubber();this._enableControl(this.mediaTimeDisplay);this._enableControl(this.mediaDurationDisplay)},enableCaptionsControl:function(){if(!this.captionsControl.isEnabled&&this.controllerType!=="short-slim"&&!this.captionsControl.isEnabled&&!(typeof this.options!="undefined"&&this.options.captionsControlOff===true)){Element.addClassName(this.captionsControl,this.captionsControl.baseClassName+"-enabled");this.captionsControl.isEnabled=true;this.setSettingsControlsClass()}},_enableSettingsControlWithMenu:function(d,c){if(!d.isEnabled&&this.controllerType!=="short-slim"&&!(typeof this.options!="undefined"&&this.options[d.name+"Off"]===true)){this.settingsMenuList.appendChild(c);d.menuListWidth=(AC.Detector.isIEStrict())?165:this.settingsMenuList.offsetWidth;this.settingsMenuList.removeChild(c);Element.addClassName(d,d.baseClassName+"-enabled");d.isEnabled=true;this.setSettingsControlsClass()}},enableSizesControl:function(){this.sizesControl.name="sizesControl";this._enableSettingsControlWithMenu(this.sizesControl,this.sizesMenu)},enableDownloadControl:function(){this.downloadControl.name="downloadControl";this._enableSettingsControlWithMenu(this.downloadControl,this.downloadMenu)},enableShareControl:function(){this.shareControl.name="shareControl";this._enableSettingsControlWithMenu(this.shareControl,this.shareMenu)},togglePlaying:function(){var b=this._send("playing");if(b){this.pause()}else{this.resetRate();this.play()}},toggleCaptions:function(){if(!Element.hasClassName(this.captionsControl,this.captionsControl.baseClassName+"-selected")&&!this.resettingController){this._selectControl(this.captionsControl);if(this._send("movieType")==="Video"){this._enableControl(this.trackText)}this._send("enableCaptions");var f=ac_media_language.captionsturnedon||"Closed Captions On";while(typeof this.alertDisplayContainer.firstChild!="undefined"&&this.alertDisplayContainer.firstChild!=null){this.alertDisplayContainer.removeChild(this.alertDisplayContainer.firstChild)}if(Media.Detection.CSSBorderRadius()===false){var e=this.getRoundRectForArcAndOpacity(0.19,0.5)}if(typeof e!="undefined"&&e!==false){var d=document.createElement("span");this.captionsDisplayAlert.innerHTML="";d.appendChild(document.createTextNode(f));e.appendChild(d);this.captionsDisplayAlert.appendChild(e)}else{this.captionsDisplayAlert.innerHTML=f}this.alertDisplayContainer.appendChild(this.captionsDisplayAlert);Element.addClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active");this.captionsControlSetting=true}else{this._unselectControl(this.captionsControl);this._disableControl(this.trackText);this.captionsControlSetting=false;if(this.resettingController===true){this._send("resetCaptions")}else{this._send("disableCaptions");var f=ac_media_language.captionsturnedoff||"Closed Captions Off";while(typeof this.alertDisplayContainer.firstChild!="undefined"&&this.alertDisplayContainer.firstChild!=null){this.alertDisplayContainer.removeChild(this.alertDisplayContainer.firstChild)}var e=this.getRoundRectForArcAndOpacity(0.19,0.5);if(e!==false){var d=document.createElement("span");this.captionsDisplayAlert.innerHTML="";d.appendChild(document.createTextNode(f));e.appendChild(d);this.captionsDisplayAlert.appendChild(e)}else{this.captionsDisplayAlert.innerHTML=f}this.alertDisplayContainer.appendChild(this.captionsDisplayAlert);Element.addClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active")}}},_toggleMenuForControlAndMenuControls:function(h,i,j){if(!Element.hasClassName(i,i.baseClassName+"-selected")&&!this.resettingMenus&&!this.resettingController){this._selectControl(i);this._selectSettingsMenuForMenu(h);this.positionSettingsMenuForControl(i)}else{this._unselectControl(i);this._unselectMenu();if(this.resettingController===true){for(var f=0,g;g=j[f];f++){this._unselectControl(g)}}}},toggleSizesMenu:function(){this._toggleMenuForControlAndMenuControls(this.sizesMenu,this.sizesControl,this._sizesMenuControls)},toggleDownloadMenu:function(){this._toggleMenuForControlAndMenuControls(this.downloadMenu,this.downloadControl,this._downloadMenuControls)},toggleShareMenu:function(){this._toggleMenuForControlAndMenuControls(this.shareMenu,this.shareControl,this._shareMenuControls)},volumeControlSetting:1,captionsControlSetting:false,sizesControlSetting:false,setSettingsControls:function(){if(typeof this.volumeControlSetting!="undefined"&&this.volumeControlSetting!=1){this.volumeScrubber.setValue(this.volumeControlSetting);this._send("setVolume",this.volumeControlSetting)}if(typeof this.captionsControlSetting!="undefined"&&this.captionsControlSetting!=false){this._send("enableCaptions")}if(typeof this.sizesControlSetting!="undefined"&&this.sizesControlSetting!=false){this.selectSizeFromMenu(this.sizesControlSetting)}},mouseoverSettingsControl:function(b){this.settingsMenuTitle.innerHTML=b.menuTitle;if(typeof this.currentMenu!="undefined"&&this.currentMenu!=false){if(this.settingsMenuList.childNodes.length>0){this.settingsMenuList.removeChild(this.currentMenu)}this.currentMenu=false}this.positionSettingsMenuForControl(b);Element.addClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-hovered");Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName);this._unselectControl(this.sizesControl);this._unselectControl(this.downloadControl);this._unselectControl(this.shareControl)},mouseoutSettingsControl:function(j,l){return;var j=j||window.event,o=Element.cumulativeOffset(this.settingsMenu).top,m=Element.cumulativeOffset(this.settingsMenu).left,n=this.settingsMenu.offsetWidth,k=this.settingsMenu.offsetHeight,p,i;if(j){p=j.pageX||(j.clientX+(document.documentElement.scrollLeft)?document.documentElement.scrollLeft:document.body.scrollLeft);i=j.pageY||(j.clientY+(document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);if(!(p>m&&p<(m+n)&&i>o&&i<(o+k+14))){Element.addClassName(this.settingsMenu,this.settingsMenu.baseClassName);Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-hovered")}}},positionSettingsMenuForControl:function(P){this.positionCarrotForControl(P);if(typeof this.settingsMenuRoundRect!="undefined"&&this.settingsMenuRoundRect!==false){var J=this.settingsMenuList.getElementsByTagName("li"),H=P.menuListWidth,K=parseInt(((J.length>0)?22:0)+this.settingsMenuTitle.offsetHeight+(J.length*25)),Q=Math.min((7/Math.min(K,H)),1).toFixed(2),M=this.settingsMenu.childNodes,G=this.settingsMenu.node;while(typeof this.settingsMenuRoundRect!="undefined"&&this.settingsMenuRoundRect.firstChild){this.settingsMenuRoundRect.removeChild(this.settingsMenuRoundRect.firstChild)}this.settingsMenu.removeChild(this.settingsMenuRoundRect);this.settingsMenuRoundRect=this.getRoundRectForArcAndOpacity(Q,0.9);this.settingsMenu.insertBefore(this.settingsMenuRoundRect,this.settingsMenu.firstChild);if(H&&K){this.settingsMenuList.style.display="block";this.settingsMenu.style.width=H+"px";this.settingsMenu.style.height=K+"px"}else{this.settingsMenu.style.display="none"}}else{if(typeof P.menuListWidth!="undefined"){this.settingsMenuList.style.width=P.menuListWidth+"px"}}var E=parseInt(this.settingsMenuCarrot.style.top),R=parseInt(this.settingsMenuCarrot.style.left),I=this.settingsMenu.offsetHeight,X=this.settingsMenu.offsetWidth,W=Element.cumulativeOffset(this.mediaController).left,U=this.mediaController.offsetWidth,S=this.settingsMenuCarrot.offsetHeight,N=this.settingsMenuCarrot.offsetWidth,z=E-I+S,L=(W+U)-X,V=Element.cumulativeOffset(P).left,F=V+(P.offsetWidth/2),T,A,O,B,C;if(this.controllerType==="slim"||this.controllerType==="short-slim"){var D=(W+U+20)-X;this.settingsMenu.style.top=(E+S)+"px";this.settingsMenu.style.left=((D<R)?D:R)+"px"}else{this.settingsMenu.style.top=z+"px";this.settingsMenu.style.left=((L-7<R)?(L-7):R)+"px"}T=parseInt(this.settingsMenu.style.left);O=I;B=parseInt(this.settingsMenuCarrot.style.left)-T;if(this.controllerType==="slim"||this.controllerType==="short-slim"){this.settingsMenuCarrot.style.top=(0-(S+6))+"px"}else{this.settingsMenuCarrot.style.top=(AC.Detector.isIEStrict())?((I-S)+8)+"px":(I-S)+"px"}this.settingsMenuCarrot.style.left=(B-(N/2))+"px";this.settingsMenu.style.overflow="visible"},positionCarrotForControl:function(q){var s=Element.cumulativeOffset(this.mediaController).top,r=this.mediaController.offsetWidth,o=this.mediaController.offsetHeight,l=Element.cumulativeOffset(q).left,k=q.offsetWidth,n=this.settingsMenuCarrot.offsetWidth,p=this.settingsMenuCarrot.offsetHeight,t=s-p,m=l+((k-n)/2);this.settingsMenu.style.overflow="hidden";if(this.controllerType==="slim"||this.controllerType==="short-slim"){Element.addClassName(this.settingsMenuCarrot,"slim-menu-carrot");this.settingsMenuCarrot.style.top=(s+o)+"px"}else{this.settingsMenuCarrot.style.top=t+"px"}this.settingsMenuCarrot.style.left=m+"px"},_selectSettingsMenuForMenu:function(f){var e=f.menuTitle,d=f.menuName;this.settingsMenuTitle.innerHTML=e;if(typeof this.currentMenu!="undefined"&&this.currentMenu!=false){if(this.settingsMenuList.childNodes>0){this.settingsMenuList.removeChild(this.currentMenu)}}this.settingsMenuList.appendChild(f);this.currentMenu=f},_unselectMenu:function(){Element.addClassName(this.settingsMenu,this.settingsMenu.baseClassName);Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-selected");Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-hovered")},_selectControl:function(b){Element.addClassName(b,b.baseClassName+"-selected");if(b===this.sizesControl||b===this.downloadControl||b===this.shareControl){Element.addClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-selected");Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName);Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-hovered");this._currentSettingsControl=b}},_unselectControl:function(b){Element.removeClassName(b,b.baseClassName+"-selected")},_enableControl:function(b){Element.addClassName(b,b.baseClassName+"-enabled")},_disableControl:function(b){Element.removeClassName(b,b.baseClassName+"-enabled")},reset:function(){if(typeof this.scrubber!="undefined"){this.playhead.style.left="0px";this.trackProgress.style.width=this.playhead.style.left;this.show();Element.show(this.playControl);Element.hide(this.pauseControl);this._disableControl(this.volumeMuteControl);this._disableControl(this.volumeFullControl);this._disableControl(this.volumeThumb);this._disableControl(this.playControl);this._disableControl(this.pauseControl);this._disableControl(this.playhead);this._disableControl(this.fastBackwardControl);this._disableControl(this.fastForwardControl);this.removeAdvancedPlayDisplay()}},resetSettingsControls:function(){this.resetSettingsMenus()},resetSettingsMenus:function(){this.resettingMenus=true;Element.removeClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active");Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-hovered");Element.removeClassName(this.settingsMenu,this.settingsMenu.baseClassName+"-selected");this.toggleSizesMenu();this.toggleDownloadMenu();this.toggleShareMenu();this.resettingMenus=false},resetRate:function(){if(this._send("rate")!==1){this.removeAdvancedPlayDisplay();this._send("setRate",1)}},removeAdvancedPlayDisplay:function(){this.removeAlertDisplay();Element.removeClassName(this.fastBackwardControl,"fastBackward-active");Element.removeClassName(this.fastForwardControl,"fastForward-active")},removeAlertDisplay:function(){this.setRateDisplay(this.fastBackwardControl,null);this.setRateDisplay(this.fastForwardControl,null);Element.removeClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active")},setSettingsControlsClass:function(){var c=this.settingsControls.baseClassName,d=0;if(typeof this.captionsControl.isEnabled!="undefined"&&this.captionsControl.isEnabled===true){c+="-captions";d++}if(typeof this.sizesControl.isEnabled!="undefined"&&this.sizesControl.isEnabled===true){c+="-sizes";d++}if(typeof this.downloadControl.isEnabled!="undefined"&&this.downloadControl.isEnabled===true){c+="-download";d++}if(typeof this.shareControl.isEnabled!="undefined"&&this.shareControl.isEnabled===true){c+="-share";d++}this.settingsControls.className="";Element.addClassName(this.settingsControls,this.settingsControls.baseClassName);Element.addClassName(this.settingsControls,c);this.setTrackContainerWidth()},setTrackContainerWidth:function(){if(this.controllerType==="slim"||this.controllerType==="short-slim"){var h=(this.settingsControls.offsetWidth>0)?parseInt(this.settingsControls.offsetWidth+10):0,f=this.mediaController.offsetLeft,i=this.mediaController.offsetWidth,j=parseInt(f+i);newTrackWidth=parseInt(((j-this.trackContainer.offsetLeft)<=600)?(j-this.trackContainer.offsetLeft):600),newTrackContainerWidth=parseInt(newTrackWidth-(h+10));if(this.controllerType==="slim"){var g=parseInt(this.trackContainer.offsetLeft+newTrackContainerWidth+20);if(j<g){newTrackContainerWidth=parseInt(newTrackContainerWidth-(g-j))}}this.trackContainer.style.width=newTrackContainerWidth+"px";this.track.parentNode.style.width=(this.controllerType==="short-slim")?newTrackContainerWidth+"px":parseInt(newTrackContainerWidth-80)+"px";this.scrubberMax=(this.controllerType==="short-slim")?newTrackContainerWidth:parseInt(newTrackContainerWidth-80);this.volumeScrubber=null;this.createVolumeScrubber();this.scrubber=null;this.createTrackScrubber()}},_send:function(c,d){if(this.delegate&&c in this.delegate){d=[].concat(d);return this.delegate[c].apply(this.delegate,d)}},show:function(){Media.ControlsWidget.show(this)},hide:function(){if(this._seeking||this._volSeeking){return}Media.ControlsWidget.hide(this);this.removeAlertDisplay()},play:function(){this.resetRate();if(this._send("playing")===false){this._send("play")}Element.hide(this.playControl);Element.show(this.pauseControl)},pause:function(){this.resetRate();if(this._send("playing")===true){this._send("pause")}Element.hide(this.pauseControl);Element.show(this.playControl)},fastBackward:function(){var h=this._send("rate"),e="";if(this._send("playing")===false){this._send("play")}else{Element.hide(this.pauseControl);Element.show(this.playControl)}switch(h){case -2:this._send("setRate",-4);e="4x";this.setRateDisplay(this.speedDisplayAlert,"four-times-speed-display");this.setRateDisplay(this.fastBackwardControl,"four-times-fast-backward");break;case -4:this._send("setRate",-8);e="8x";this.setRateDisplay(this.speedDisplayAlert,"eight-times-speed-display");this.setRateDisplay(this.fastBackwardControl,"eight-times-fast-backward");break;default:this._send("setRate",-2);e="2x";this.setRateDisplay(this.speedDisplayAlert,"two-times-speed-display");this.setRateDisplay(this.fastBackwardControl,"two-times-fast-backward");break}this.setRateDisplay(this.fastForwardControl,null);while(typeof this.alertDisplayContainer.firstChild!="undefined"&&this.alertDisplayContainer.firstChild!=null){this.alertDisplayContainer.removeChild(this.alertDisplayContainer.firstChild)}this.speedDisplayAlert.innerHTML="";var f=this.getRoundRectForArcAndOpacity(0.19,0.5);if(f!==false){var g=document.createElement("span");g.appendChild(document.createTextNode(e));f.appendChild(g);this.speedDisplayAlert.appendChild(f)}else{this.speedDisplayAlert.appendChild(document.createTextNode(e))}this.alertDisplayContainer.appendChild(this.speedDisplayAlert);Element.addClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active");Element.removeClassName(this.fastForwardControl,"fastForward-active");Element.addClassName(this.fastBackwardControl,"fastBackward-active")},fastForward:function(){var h=this._send("rate"),e="";if(this._send("playing")===false){this._send("play")}else{Element.hide(this.pauseControl);Element.show(this.playControl)}switch(h){case 2:this._send("setRate",4);e="4x";this.setRateDisplay(this.speedDisplayAlert,"four-times-speed-display");this.setRateDisplay(this.fastForwardControl,"four-times-fast-forward");break;case 4:this._send("setRate",8);e="8x";this.setRateDisplay(this.speedDisplayAlert,"eight-times-speed-display");this.setRateDisplay(this.fastForwardControl,"eight-times-fast-forward");break;default:this._send("setRate",2);e="2x";this.setRateDisplay(this.speedDisplayAlert,"two-times-speed-display");this.setRateDisplay(this.fastForwardControl,"two-times-fast-forward");break}this.setRateDisplay(this.fastBackwardControl,null);while(typeof this.alertDisplayContainer.firstChild!="undefined"&&this.alertDisplayContainer.firstChild!=null){this.alertDisplayContainer.removeChild(this.alertDisplayContainer.firstChild)}this.speedDisplayAlert.innerHTML="";var f=this.getRoundRectForArcAndOpacity(0.19,0.5);if(f!==false){var g=document.createElement("span");g.appendChild(document.createTextNode(e));f.appendChild(g);this.speedDisplayAlert.appendChild(f)}else{this.speedDisplayAlert.appendChild(document.createTextNode(e))}this.alertDisplayContainer.appendChild(this.speedDisplayAlert);Element.addClassName(this.alertDisplayContainer,this.alertDisplayContainer.baseClassName+"-active");Element.removeClassName(this.fastBackwardControl,"fastBackward-active");Element.addClassName(this.fastForwardControl,"fastForward-active")},setRateDisplay:function(c,d){if(typeof c.currentRateDisplay!="undefined"&&c.currentRateDisplay!==d){Element.removeClassName(c,c.currentRateDisplay)}Element.addClassName(c,d);c.currentRateDisplay=d},muteVolume:function(){this._send("setMuted",true);this.volumeScrubber.setValue(0)},fullVolume:function(){this._send("setMuted",false);this._send("setVolume",1);this.volumeScrubber.setValue(1)},updatePercentLoaded:function(b){if(typeof this.controlLoadedProgress!=="undefined"&&b){this.controlLoadedProgress.style.width=b*100+"%"}if(b===1){Element.addClassName(this.trackEndCap,"track-right-cap-loaded");Element.removeClassName(this.trackEndCap,"track-right-cap")}},updateTime:function(e){var g=this._send("duration"),f=(g-e);if((e<1||f<1)&&this._send("rate")!==1){this.resetRate();this._send("pause");Element.removeClassName(this.fastBackwardControl,"fastBackward-active");Element.removeClassName(this.fastForwardControl,"fastForward-active")}try{this.scrubber.setValue((e/g)||0)}catch(h){}this.updateElapsedTime(e);this.updateRemainingTime(f)},_setTimeForReadout:function(i,f,h){var g=parseInt(i/60,10),j=parseInt(i%60,10);if(g<10){g="0"+g}if(j<10){j="0"+j}f.innerHTML=g;h.innerHTML=j},updateElapsedTime:function(d){var e=this.minutesPlayed,f=this.secondsPlayed;this._setTimeForReadout(d,e,f)},updateRemainingTime:function(d){var e=this.minutesRemaining,f=this.secondsRemaining;this._setTimeForReadout(d,e,f)}};Ajax.checkURL=function(e,f){var d=Ajax.getTransport();d.onreadystatechange=function(){if(this.readyState===4&&this.status===200){f()}};d.open("HEAD",e,true);d.send(null)};Ajax.Request.prototype._overrideMimeType=null;Ajax.Request.prototype.overrideMimeType=function(b){this._overrideMimeType=b;if(this.transport.overrideMimeType){this.transport.overrideMimeType(b)}};Ajax.Response.prototype.responseXMLValue=function(){if(AC.Detector.isIEStrict()){var b=this.transport.responseXML.documentElement;if(!b&&this.request._doesOverrideXMLMimeType()){this.transport.responseXML.loadXML(this.transport.responseText)}}return this.transport.responseXML};Media.ControlsWidget.SharePlugin=function(){};Media.ControlsWidget.SharePlugin.prototype.name=function(){return this._name};Media.ControlsWidget.SharePlugin.prototype.actionName=function(){return"share"};Media.ControlsWidget.SharePlugin.prototype.pluginType=function(){return"Share"};